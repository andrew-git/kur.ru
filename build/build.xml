<?xml version="1.0" encoding="UTF-8"?>
<project name="yii-cms" basedir="." default="build">

    <property file="properties/dev" />
    <property file="properties/doc" />
    <tstamp />

    <target name="git">
        <property file="properties/git" />
        <input propertyName="git.tag">Git tag: </input>
        <gitpull repository="${deploy.dir}" force="true" />
        <gittag repository="${deploy.dir}" name="${git.tag}" />
        <gitpush repository="${deploy.dir}" tags="true" />
   </target>

    <target name="rsync">
        <property file="properties/sync" />
        <taskdef name="sync" classname="phing.tasks.ext.FileSyncTask" />
        <sync
            sourcedir="${sync.source.dir}"
            destinationdir="${sync.destination.dir}"
            excludefile="${sync.exclude.file}"
            listonly="false"
            verbose="false" />
    </target>

    <target name="build" depends="git, rsync">
        <echo msg="All done." />
    </target>

</project>


